# 浏览器工作原理

## 浏览器架构

浏览器早期都是单进程架构, 导致的问题是不稳定, 不流畅, 不安全, 后来chrome开启了多进程架构时代, 中间也经过了多次迭代, 目前是面向服务架构, 由浏览器主进程, 各种服务进程(GPU进程, 网络进程, 文件进程等), 每个页面单独的渲染进程(对于同一站点, 即协议与根域名相同的站点, chrome会复用渲染进程), 插件进程, 共同构成.

各页面渲染进程的独立使得页面脚本的执行互不干扰, 解决了不稳定不流畅的问题, 同时各个进程是在沙箱中运行的, 也更安全了.

## 数据传输

网络层的IP协议负责把数据包送到目标主机, 传输层的TCP/UDP协议负责把数据包送到目标应用端口, 其中TCP协议通过三次握手, 传输数据, 四次挥手保证了数据稳定性.

浏览器多个标签均发起请求时, 源端口是相同的, 但网络进程知道每个TCP连接对应的标签, 所以接收到数据后, 会将内容分发到目标标签页的渲染进程.